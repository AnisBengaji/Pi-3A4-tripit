<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.URL?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane fx:id="root" prefHeight="882.0" prefWidth="1640.0" style="-fx-background-color: linear-gradient(to bottom right, #00798b, #1b1f37);" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.projeti.controllers.HomeCategoryController">
    <!-- Apply CSS stylesheet -->
    <stylesheets>
        <URL value="@homeCategories.css" />
    </stylesheets>

    <!-- Left Side Menu -->
    <VBox fx:id="menu" spacing="10" prefHeight="800" prefWidth="250" style="-fx-background-color: rgba(0, 0, 0, 0.7);">
        <!-- Logo -->
        <Label alignment="CENTER" style="-fx-text-fill: white; -fx-font-size: 28px; -fx-font-weight: bold; -fx-padding: 30px;" text="Trip It">
            <font>
                <Font name="Arial" size="28" />
            </font>
        </Label>

        <!-- Menu Items -->
        <Button fx:id="homeButton" prefHeight="40.0" prefWidth="200.0" styleClass="menu-button" text="Home">
            <graphic>
                <ImageView fitHeight="28" fitWidth="28">
                    <image>
                        <Image url="@icons/home.png" />
                    </image>
                </ImageView>
            </graphic>
        </Button>
        <Button fx:id="destinationsButton" prefHeight="40.0" prefWidth="200.0" styleClass="menu-button" text="Destinations">
            <graphic>
                <ImageView fitHeight="28" fitWidth="28">
                    <image>
                        <Image url="@icons/destination.png" />
                    </image>
                </ImageView>
            </graphic>
        </Button>
        <Button fx:id="bookingsButton" prefHeight="40.0" prefWidth="200.0" styleClass="menu-button" text="Reservation">
            <graphic>
                <ImageView fitHeight="28" fitWidth="28">
                    <image>
                        <Image url="@icons/reserve.png" />
                    </image>
                </ImageView>
            </graphic>
        </Button>
        <Button fx:id="galleryButton" prefHeight="40.0" prefWidth="200.0" styleClass="menu-button" text="Offre">
            <graphic>
                <ImageView fitHeight="28" fitWidth="28">
                    <image>
                        <Image url="@icons/offer.png" />
                    </image>
                </ImageView>
            </graphic>
        </Button>
        <Button fx:id="tipsButton" prefHeight="40.0" prefWidth="200.0" styleClass="menu-button" text="Publications">
            <graphic>
                <ImageView fitHeight="28" fitWidth="28">
                    <image>
                        <Image url="@icons/post1.png" />
                    </image>
                </ImageView>
            </graphic>
        </Button>
        <Button fx:id="eventbutton" prefHeight="40.0" prefWidth="200.0" styleClass="menu-button" text="Evenement">
            <graphic>
                <ImageView fitHeight="28" fitWidth="28">
                    <image>
                        <Image url="@icons/event.png" />
                    </image>
                </ImageView>
            </graphic>
        </Button>
        <Button fx:id="contactButton" prefHeight="40.0" prefWidth="200.0" styleClass="menu-button" text="Profile">
            <graphic>
                <ImageView fitHeight="28" fitWidth="28">
                    <image>
                        <Image url="@icons/profile.png" />
                    </image>
                </ImageView>
            </graphic>
        </Button>
    </VBox>

    <!-- Main Content Area -->
    <ScrollPane fx:id="contentArea" layoutX="250" layoutY="0" prefHeight="882.0" prefWidth="1386.0" style="-fx-background-color: transparent;">
        <VBox fx:id="mainContent" prefHeight="806.0" prefWidth="854.0" spacing="20" style="-fx-padding: 30px;">
            <!-- Header Section -->
            <HBox prefHeight="100.0" prefWidth="950.0" spacing="20">
                <VBox alignment="CENTER" prefHeight="100.0" prefWidth="399.0">
                    <children>
                        <Label prefHeight="96.0" prefWidth="221.0" text="Les Categories" textFill="00CED1">
                            <font>
                                <Font size="30.0" />
                            </font>
                        </Label>
                    </children>
                </VBox>
                <Pane prefHeight="100.0" prefWidth="502.0">
                    <children>
                        <!-- Updated styled search field for categories -->
                        <HBox layoutX="15.0" layoutY="37.0" spacing="5" alignment="CENTER_LEFT" styleClass="search-container">
                            <TextField  prefHeight="34.0" prefWidth="176.0" promptText="Search categories..." styleClass="modern-search-bar" />
                            <Button fx:id="categorySearchButton" prefHeight="34.0" prefWidth="34.0" styleClass="search-button">
                                <graphic>
                                    <ImageView fitHeight="16.0" fitWidth="16.0" pickOnBounds="true" preserveRatio="true">
                                        <image>
                                            <Image url="@icons/search.png" />
                                        </image>
                                    </ImageView>
                                </graphic>
                            </Button>
                        </HBox>

                        <!-- Updated styled search field for publications -->


                    </children>
                </Pane>
            </HBox>

            <!-- Switch to Publications Button -->
            <Button fx:id="switchToPubButton" onAction="#switchToHomePub" prefHeight="0.0" prefWidth="29.0" styleClass="button-main">
                <graphic>
                    <ImageView fitHeight="20.0" fitWidth="20.0" pickOnBounds="true" preserveRatio="true" styleClass="image-view">
                        <image>
                            <Image url="@icons/category.png" />
                        </image>
                    </ImageView>
                </graphic>
            </Button>

            <!-- Category ListView -->
            <ScrollPane prefHeight="590.0" prefWidth="2388.0" styleClass="scroll-pane">
                <content>
                    <ListView fx:id="categoriesListView" prefHeight="558.0" prefWidth="860.0" styleClass="category-list" />
                </content>
            </ScrollPane>

            <!-- Publication ListView - Added for the filtered publications -->
            <ScrollPane prefHeight="590.0" prefWidth="2388.0" styleClass="scroll-pane">
                <content>
                    <ListView fx:id="publicationsListView" prefHeight="558.0" prefWidth="860.0" styleClass="publications-list" visible="false" />
                </content>
            </ScrollPane>
        </VBox>
    </ScrollPane>

    <!-- Side Action Buttons -->
    <VBox layoutX="1204.0" layoutY="332.0" prefHeight="200.0" prefWidth="308.0">
        <children>
            <VBox prefHeight="200.0" prefWidth="100.0" spacing="40.0">
                <children>
                    <Button fx:id="btnDetail" mnemonicParsing="false" onAction="#goToDetailCategory" prefHeight="40.0" prefWidth="150.0" styleClass="button-main" text="Detail" textFill="WHITE">
                        <graphic>
                            <ImageView fitHeight="20.0" fitWidth="20.0" pickOnBounds="true" preserveRatio="true" styleClass="image-view">
                                <image>
                                    <Image url="@icons/detail.png" />
                                </image>
                            </ImageView>
                        </graphic>
                    </Button>
                    <Button fx:id="btnAjouter" mnemonicParsing="false" onAction="#goToAjouterCat" prefHeight="40.0" prefWidth="150.0" styleClass="button-main" text="Ajouter" textFill="WHITE">
                        <graphic>
                            <ImageView fitHeight="20.0" fitWidth="20.0" pickOnBounds="true" preserveRatio="true" styleClass="image-view">
                                <image>
                                    <Image url="@icons/addpost.png" />
                                </image>
                            </ImageView>
                        </graphic>
                    </Button>
                </children>
            </VBox>
        </children>
    </VBox>
</AnchorPane>